{% extends 'base.html' %}

{% block head %}

{% endblock %}

{% block body %}

{% include 'navbar.html' %}

<div class="flex items-center justify-center min-h-screen bg-gray-100 ">
  <div class="border border-gray-300 shadow-sm rounded-3xl p-6 max-w-lg w-full bg-white">
    <div class="flex min-h-full flex-col justify-center px-6 py-12 lg:px-8">
      <div class="sm:mx-auto sm:w-full sm:max-w-md">
        <img class="mx-auto h-28 w-auto" src="{{ url_for('static', path='images/logo-tp.png') }}" alt="Your Company">
        <h2 class="mt-5 text-center text-3xl font-bold tracking-tight text-gray-900">Sign in</h2>
      </div>

      <div class="mt-10 sm:mx-auto sm:w-full sm:max-w-md">
        <div id="signin-container" class="space-y-6">
          <!-- Username -->
          <div>
            <label for="username" class="block text-base font-medium text-gray-900">Username</label>
            <div class="mt-2">
              <input type="text" id="username" autocomplete="username" required class="block w-full  rounded-md bg-white px-4 py-2 text-lg text-gray-900 outline-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:outline-sky-800/90">
              <p id="username-error" class="text-red-600 text-sm mt-1 hidden">Username is required.</p>
            </div>
          </div>

          <!-- Password -->
          <div>
            <label for="password" class="block text-base font-medium text-gray-900">Password</label>
            <div class="mt-2">
              <input type="password" id="password" autocomplete="current-password" required class="block w-full  rounded-md bg-white px-4 py-2 text-lg text-gray-900 outline-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:outline-sky-800/90">
              <p id="password-error" class="text-red-600 text-sm mt-1 hidden">Password is required.</p>
            </div>
          </div>

          <!-- Submit Button -->
          <div>
            <button id="signin-button" class="flex w-full justify-center rounded-md bg-sky-800/90 px-4 py-2 text-lg font-semibold text-white shadow-sm hover:bg-sky-700/90 focus:outline-2 focus:outline-offset-2 focus:outline-sky-800/90">Sign in</button>
          </div>

          <!-- Error Message -->
          <p id="signin-error" class="text-red-600 text-sm mt-3 hidden"></p>
        </div>

        <p class="mt-5 text-center text-base text-gray-500">
          Don't have an account?
          <a href="/signup" class="font-semibold text-sky-800/90 hover:text-sky-700/90">Sign up</a>
        </p>
      </div>
    </div>
  </div>
</div>

<script src="{{ url_for('static', path='js/signin.js') }}"></script>
<script type="module" >
  import { signinWithToken } from "{{ url_for('static', path='js/utils.js') }}"
  const redirectUrl = await signinWithToken();
  if (redirectUrl) {
    window.location.href = redirectUrl;
  }
</script>
{% endblock %}